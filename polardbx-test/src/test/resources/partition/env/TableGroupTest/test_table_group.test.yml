## DISABLE_FAST_SQL_PARSER
create tablegroup mytg1;
CREATE TABLE IF NOT EXISTS `t10` (`pk` BIGINT(11) NOT NULL AUTO_INCREMENT BY GROUP,`name` varchar(64) DEFAULT NULL,`money` int DEFAULT NULL, PRIMARY KEY (`pk`)) ENGINE=InnoDB DEFAULT CHARSET=UTF8 PARTITION BY KEY(money) PARTITIONS 8 tablegroup=mytg1;
show full create table t10;
CREATE TABLE IF NOT EXISTS `t20` (`pk` BIGINT(11) NOT NULL AUTO_INCREMENT BY GROUP,`name` varchar(64) DEFAULT NULL,`money` int DEFAULT NULL, PRIMARY KEY (`pk`)) ENGINE=InnoDB DEFAULT CHARSET=UTF8 PARTITION BY KEY(money) PARTITIONS 8 tablegroup=mytg1;
show full create table t20;
drop table t20;
drop table t10;
CREATE TABLE IF NOT EXISTS `t20` (`pk` BIGINT(11) NOT NULL AUTO_INCREMENT BY GROUP,`name` varchar(64) DEFAULT NULL,`money` int DEFAULT NULL, PRIMARY KEY (`pk`)) ENGINE=InnoDB DEFAULT CHARSET=UTF8 PARTITION BY KEY(money) PARTITIONS 3 tablegroup=mytg1;
show full create table t20;
create tablegroup mytg2;
DROP TABLE IF EXISTS t01;
CREATE TABLE IF NOT EXISTS `t01` (`a` int(11) DEFAULT NULL,`b` int(11) DEFAULT NULL) PARTITION BY KEY(`a`,`b`) PARTITIONS 5 tablegroup=mytg2;
alter table t01 split into hotpart2 partitions 10 by hot value(15);
show full create table t01;
select TABLE_GROUP_NAME,LOCALITY,PRIMARY_ZONE,IS_MANUAL_CREATE,PART_INFO from information_schema.full_table_group where table_group_name='mytg2';
alter tablegroup mytg2 split into hotpart3 partitions 10 by hot value(15);
show full create table t01;
select TABLE_GROUP_NAME,LOCALITY,PRIMARY_ZONE,IS_MANUAL_CREATE,PART_INFO from information_schema.full_table_group where table_group_name='mytg2';
alter tablegroup mytg2 split into hotpart3 partitions 8 by hot value(15);
show full create table t01;
alter table t01 split into hotpart3 partitions 7 by hot value(15);
show full create table t01;
select TABLE_GROUP_NAME,LOCALITY,PRIMARY_ZONE,IS_MANUAL_CREATE,PART_INFO from information_schema.full_table_group where table_group_name='mytg2';
alter tablegroup mytg2 extract to partition exp1 by hot value(1,1);
show full create table t01;
select TABLE_GROUP_NAME,LOCALITY,PRIMARY_ZONE,IS_MANUAL_CREATE,PART_INFO from information_schema.full_table_group where table_group_name='mytg2';
alter tablegroup mytg2 extract to partition exp2 by hot value(1,2);
show full create table t01;
select TABLE_GROUP_NAME,LOCALITY,PRIMARY_ZONE,IS_MANUAL_CREATE,PART_INFO from information_schema.full_table_group where table_group_name='mytg2';
drop table if exists txxyz;
create table txxxyz(a int,b int, global index g1(b) partition by hash(b) partition 2, global index g2(a) partition by hash(a) partitions 2)partition by hash(a) partitions 2;
select length(tables)-length(replace(tables,',',''))+1 from information_schema.full_table_group where tables like '%txxxyz%';