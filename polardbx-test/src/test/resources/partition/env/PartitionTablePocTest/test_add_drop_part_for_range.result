DROP TABLE IF EXISTS tbl_range1;
DROP TABLE IF EXISTS tbl_range2;
CREATE TABLEGROUP new_tg_for_add_part;
CREATE TABLE IF NOT EXISTS tbl_range1 (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE (a) (
	PARTITION p1 VALUES LESS THAN (100),
	PARTITION p2 VALUES LESS THAN (200),
	PARTITION p3 VALUES LESS THAN (300)
);
ALTER TABLE tbl_range1
	SET tablegroup = new_tg_for_add_part FORCE;
CREATE TABLE IF NOT EXISTS tbl_range2 (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE (a) (
	PARTITION p1 VALUES LESS THAN (100),
	PARTITION p2 VALUES LESS THAN (200),
	PARTITION p3 VALUES LESS THAN (300)
);
ALTER TABLE tbl_range2
	SET tablegroup = new_tg_for_add_part FORCE;
SHOW CREATE TABLE tbl_range1;
Table,Create Table
tbl_range1,CREATE TABLE `tbl_range1` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB)
tablegroup = `new_tg_for_add_part`
SHOW CREATE TABLE tbl_range2;
Table,Create Table
tbl_range2,CREATE TABLE `tbl_range2` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB)
tablegroup = `new_tg_for_add_part`
INSERT INTO tbl_range1
VALUES (99),
	(199),
	(299);
INSERT INTO tbl_range2
VALUES (99),
	(199),
	(299);
ALTER TABLEGROUP new_tg_for_add_part ADD PARTITION (PARTITION p4 VALUES LESS THAN (400)) ;
SHOW CREATE TABLE tbl_range1;
Table,Create Table
tbl_range1,CREATE TABLE `tbl_range1` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (400) ENGINE = InnoDB)
tablegroup = `new_tg_for_add_part`
SHOW CREATE TABLE tbl_range2;
Table,Create Table
tbl_range2,CREATE TABLE `tbl_range2` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (400) ENGINE = InnoDB)
tablegroup = `new_tg_for_add_part`
INSERT INTO tbl_range1
VALUES (399);
INSERT INTO tbl_range2
VALUES (399);
## check if p4 has value 399
SELECT *
FROM tbl_range1 PARTITION (p4);
a
399
SELECT *
FROM tbl_range2 PARTITION (p4);
a
399
ALTER TABLEGROUP new_tg_for_add_part DROP PARTITION p1 ;
INSERT INTO tbl_range1
VALUES (98);
INSERT INTO tbl_range2
VALUES (98);
## check if p2 has value 98
SELECT *
FROM tbl_range1 PARTITION (p2);
a
98
199
SELECT *
FROM tbl_range2 PARTITION (p2);
a
98
199
