## DISABLE_FAST_SQL_PARSER
CREATE TABLE `t2` (
  `a` varchar(8) DEFAULT NULL,
  `b` varchar(16) DEFAULT NULL,
  `c` varchar(32) DEFAULT NULL,
  `d` int(11) DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`) PARTITIONS 4 (
PARTITION p1 VALUES LESS THAN (1000,9223372036854775807),
PARTITION p2 VALUES LESS THAN (2000,9223372036854775807),
PARTITION p3 VALUES LESS THAN (3000,9223372036854775807),
PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807)
);
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t2;

CREATE TABLE `t3` (
  `a` varchar(8) DEFAULT NULL,
  `b` varchar(16) DEFAULT NULL,
  `c` varchar(32) DEFAULT NULL,
  `d` int(11) DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`,`c`) PARTITIONS 4 (
PARTITION p1 VALUES LESS THAN (1000,9223372036854775807,9223372036854775807),
PARTITION p2 VALUES LESS THAN (2000,9223372036854775807,9223372036854775807),
PARTITION p3 VALUES LESS THAN (3000,9223372036854775807,9223372036854775807),
PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807)
);
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t3;

CREATE TABLE `t4` (
  `a` varchar(8) DEFAULT NULL,
  `b` varchar(16) DEFAULT NULL,
  `c` varchar(32) DEFAULT NULL,
  `d` int(11) DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`,`c`,`d`) PARTITIONS 4 (
  PARTITION p1 VALUES LESS THAN (1000,9223372036854775807,9223372036854775807,9223372036854775807),
  PARTITION p2 VALUES LESS THAN (2000,9223372036854775807,9223372036854775807,9223372036854775807),
  PARTITION p3 VALUES LESS THAN (3000,9223372036854775807,9223372036854775807,9223372036854775807),
  PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807)
);
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t4;

CREATE TABLE `t5` (
`a` varchar(8) DEFAULT NULL,
`b` varchar(16) DEFAULT NULL,
`c` varchar(32) DEFAULT NULL,
`d` int(11) DEFAULT NULL,
`e` datetime DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`,`c`,`d`,`e`) PARTITIONS 4 (
PARTITION p1 VALUES LESS THAN (1000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p2 VALUES LESS THAN (2000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p3 VALUES LESS THAN (3000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807)
);

CREATE TABLE `t6` (
`a` varchar(8) DEFAULT NULL,
`b` varchar(16) DEFAULT NULL,
`c` varchar(32) DEFAULT NULL,
`d` int(11) DEFAULT NULL,
`e` datetime DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`,`c`,`d`,`e`) PARTITIONS 4 (
PARTITION p1 VALUES LESS THAN (1000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p2 VALUES LESS THAN (2000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p3 VALUES LESS THAN (3000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807)
);

CREATE TABLE `t7` (
`a` varchar(8) DEFAULT NULL,
`b` varchar(16) DEFAULT NULL,
`c` varchar(32) DEFAULT NULL,
`d` int(11) DEFAULT NULL,
`e` datetime DEFAULT NULL
) ENGINE = InnoDB DEFAULT
PARTITION BY KEY(`a`,`b`,`c`,`d`,`e`) PARTITIONS 4 (
PARTITION p1 VALUES LESS THAN (1000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p2 VALUES LESS THAN (2000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p3 VALUES LESS THAN (3000,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807),
PARTITION p4 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807,9223372036854775807)
);

/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t5;

alter table t5 split partition p1;
alter table t4 split partition p1;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t5;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t4;
select * from t5;
select * from t4;
alter table t5 split partition p2;
alter table t4 split partition p2;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t5;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t4;
select * from t5;
select * from t4;

alter table t2 extract to partition by hot value('a', 'a');
alter table t3 extract to partition by hot value('a', 'a');

select * from t2;
select * from t3;

/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t2;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t3;

alter table t7 split into pcc partitions 2 by hot value('c', 'c');
alter table t6 split into pcc partitions 2 by hot value('c', 'c');
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t6;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t7;
select * from t6;
select * from t7;

alter table t7 split into pxx partitions 1 by hot value('c', 'c');
alter table t6 split into pxx partitions 1 by hot value('c', 'c');

/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t6;
/*+TDDL:cmd_extra(SHOW_HASH_PARTITIONS_BY_RANGE=TRUE)*/show full create table t7;
select * from t6;
select * from t7;