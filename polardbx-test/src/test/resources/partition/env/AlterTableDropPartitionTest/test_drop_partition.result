DROP TABLE IF EXISTS tbl_rng;
DROP TABLE IF EXISTS tbl_rng1;
DROP TABLE IF EXISTS tbl_rng2;
CREATE TABLE IF NOT EXISTS tbl_rng (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE (a) (
	PARTITION p1 VALUES LESS THAN (100),
	PARTITION p2 VALUES LESS THAN (200),
	PARTITION p3 VALUES LESS THAN (300),
	PARTITION p4 VALUES LESS THAN MAXVALUE
);
CREATE TABLE IF NOT EXISTS tbl_rng1 (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE (a) (
	PARTITION p1 VALUES LESS THAN (100),
	PARTITION p2 VALUES LESS THAN (200),
	PARTITION p3 VALUES LESS THAN (300),
	PARTITION p4 VALUES LESS THAN MAXVALUE
);
CREATE TABLE IF NOT EXISTS tbl_rng2 (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE (a) (
	PARTITION p1 VALUES LESS THAN (100),
	PARTITION p2 VALUES LESS THAN (200),
	PARTITION p3 VALUES LESS THAN (300),
	PARTITION p40 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE tbl_rng;
Table,Create Table
tbl_rng,CREATE TABLE `tbl_rng` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (MAXVALUE) ENGINE = InnoDB)
ALTER TABLE tbl_rng
	DROP PARTITION p2;
ALTER TABLE tbl_rng1
	DROP PARTITION p2;
SHOW CREATE TABLE tbl_rng;
Table,Create Table
tbl_rng,CREATE TABLE `tbl_rng` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (MAXVALUE) ENGINE = InnoDB)
ALTER TABLE tbl_rng
	DROP PARTITION p4;
ALTER TABLE tbl_rng1
	DROP PARTITION p4;
ALTER TABLE tbl_rng2
	DROP PARTITION p40;
SHOW CREATE TABLE tbl_rng;
Table,Create Table
tbl_rng,CREATE TABLE `tbl_rng` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB)
SHOW CREATE TABLE tbl_rng1;
Table,Create Table
tbl_rng1,CREATE TABLE `tbl_rng1` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB)
SHOW CREATE TABLE tbl_rng2;
Table,Create Table
tbl_rng2,CREATE TABLE `tbl_rng2` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(`a`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (200) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (300) ENGINE = InnoDB)
DROP TABLE IF EXISTS tbl_rng_col;
DROP TABLE IF EXISTS tbl_rng_col1;
CREATE TABLE IF NOT EXISTS tbl_rng_col (
	a varchar(20) NOT NULL,
	b int,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE COLUMNS (a, b) (
	PARTITION p1 VALUES LESS THAN ('100', 20),
	PARTITION p2 VALUES LESS THAN ('200', 20),
	PARTITION p3 VALUES LESS THAN ('300', 20),
	PARTITION p4 VALUES LESS THAN (maxvalue, maxvalue)
);
CREATE TABLE IF NOT EXISTS tbl_rng_col1 (
	a varchar(20) NOT NULL,
	b int,
	PRIMARY KEY (`a`)
)
PARTITION BY RANGE COLUMNS (a, b) (
	PARTITION p1 VALUES LESS THAN ('100', 20),
	PARTITION p2 VALUES LESS THAN ('200', 20),
	PARTITION p3 VALUES LESS THAN ('300', 20),
	PARTITION p4 VALUES LESS THAN (maxvalue, maxvalue)
);
SHOW CREATE TABLE tbl_rng_col;
Table,Create Table
tbl_rng_col,CREATE TABLE `tbl_rng_col` (
	`a` varchar(20) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN ('100',20) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN ('200',20) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN ('300',20) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (MAXVALUE,MAXVALUE) ENGINE = InnoDB)
ALTER TABLE tbl_rng_col
	DROP PARTITION p2;
ALTER TABLE tbl_rng_col1
	DROP PARTITION p2;
SHOW CREATE TABLE tbl_rng_col;
Table,Create Table
tbl_rng_col,CREATE TABLE `tbl_rng_col` (
	`a` varchar(20) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN ('100',20) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN ('300',20) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (MAXVALUE,MAXVALUE) ENGINE = InnoDB)
ALTER TABLE tbl_rng_col
	DROP PARTITION p4;
ALTER TABLE tbl_rng_col1
	DROP PARTITION p4;
SHOW CREATE TABLE tbl_rng_col;
Table,Create Table
tbl_rng_col,CREATE TABLE `tbl_rng_col` (
	`a` varchar(20) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN ('100',20) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN ('300',20) ENGINE = InnoDB)
SHOW CREATE TABLE tbl_rng_col1;
Table,Create Table
tbl_rng_col1,CREATE TABLE `tbl_rng_col1` (
	`a` varchar(20) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN ('100',20) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN ('300',20) ENGINE = InnoDB)
DROP TABLE IF EXISTS tbl_list;
DROP TABLE IF EXISTS tbl_list1;
CREATE TABLE IF NOT EXISTS tbl_list (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY LIST (a) (
	PARTITION p1 VALUES IN (10, 11),
	PARTITION p2 VALUES IN (100, 101),
	PARTITION p3 VALUES IN (200, 201),
	PARTITION p4 VALUES IN (DEFAULT)
);
CREATE TABLE IF NOT EXISTS tbl_list1 (
	a int NOT NULL,
	PRIMARY KEY (`a`)
)
PARTITION BY LIST (a) (
	PARTITION p1 VALUES IN (10, 11),
	PARTITION p2 VALUES IN (100, 101),
	PARTITION p3 VALUES IN (200, 201),
	PARTITION p4 VALUES IN (DEFAULT)
);
SHOW CREATE TABLE tbl_list;
Table,Create Table
tbl_list,CREATE TABLE `tbl_list` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST(`a`)
(PARTITION p1 VALUES IN (10,11) ENGINE = InnoDB,
 PARTITION p2 VALUES IN (100,101) ENGINE = InnoDB,
 PARTITION p3 VALUES IN (200,201) ENGINE = InnoDB,
 PARTITION p4 VALUES IN (DEFAULT) ENGINE = InnoDB)
ALTER TABLE tbl_list
	DROP PARTITION p2;
ALTER TABLE tbl_list1
	DROP PARTITION p2;
SHOW CREATE TABLE tbl_list;
Table,Create Table
tbl_list,CREATE TABLE `tbl_list` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST(`a`)
(PARTITION p1 VALUES IN (10,11) ENGINE = InnoDB,
 PARTITION p3 VALUES IN (200,201) ENGINE = InnoDB,
 PARTITION p4 VALUES IN (DEFAULT) ENGINE = InnoDB)
ALTER TABLE tbl_list
	DROP PARTITION p4;
ALTER TABLE tbl_list1
	DROP PARTITION p4;
SHOW CREATE TABLE tbl_list;
Table,Create Table
tbl_list,CREATE TABLE `tbl_list` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST(`a`)
(PARTITION p1 VALUES IN (10,11) ENGINE = InnoDB,
 PARTITION p3 VALUES IN (200,201) ENGINE = InnoDB)
SHOW CREATE TABLE tbl_list1;
Table,Create Table
tbl_list1,CREATE TABLE `tbl_list1` (
	`a` int(11) NOT NULL,
	PRIMARY KEY (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST(`a`)
(PARTITION p1 VALUES IN (10,11) ENGINE = InnoDB,
 PARTITION p3 VALUES IN (200,201) ENGINE = InnoDB)
DROP TABLE IF EXISTS tbl_list_col;
DROP TABLE IF EXISTS tbl_list_col1;
CREATE TABLE IF NOT EXISTS tbl_list_col (
	a int NOT NULL,
	b int,
	PRIMARY KEY (`a`)
)
PARTITION BY LIST COLUMNS (a, b) (
	PARTITION p1 VALUES IN ((10, 11), (12, 13)),
	PARTITION p2 VALUES IN ((100, 101), (100, 103)),
	PARTITION p3 VALUES IN ((200, 201), (100, 1321)),
	PARTITION p4 VALUES IN (DEFAULT)
);
CREATE TABLE IF NOT EXISTS tbl_list_col1 (
	a int NOT NULL,
	b int,
	PRIMARY KEY (`a`)
)
PARTITION BY LIST COLUMNS (a, b) (
	PARTITION p1 VALUES IN ((10, 11), (12, 13)),
	PARTITION p2 VALUES IN ((100, 101), (100, 103)),
	PARTITION p3 VALUES IN ((200, 201), (100, 1321)),
	PARTITION p4 VALUES IN (DEFAULT)
);
SHOW CREATE TABLE tbl_list_col;
Table,Create Table
tbl_list_col,CREATE TABLE `tbl_list_col` (
	`a` int(11) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES IN ((10,11),(12,13)) ENGINE = InnoDB,
 PARTITION p2 VALUES IN ((100,101),(100,103)) ENGINE = InnoDB,
 PARTITION p3 VALUES IN ((100,1321),(200,201)) ENGINE = InnoDB,
 PARTITION p4 VALUES IN (DEFAULT) ENGINE = InnoDB)
ALTER TABLE tbl_list_col
	DROP PARTITION p2;
ALTER TABLE tbl_list_col1
	DROP PARTITION p2;
SHOW CREATE TABLE tbl_list_col;
Table,Create Table
tbl_list_col,CREATE TABLE `tbl_list_col` (
	`a` int(11) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES IN ((10,11),(12,13)) ENGINE = InnoDB,
 PARTITION p3 VALUES IN ((100,1321),(200,201)) ENGINE = InnoDB,
 PARTITION p4 VALUES IN (DEFAULT) ENGINE = InnoDB)
ALTER TABLE tbl_list_col
	DROP PARTITION p4;
ALTER TABLE tbl_list_col1
	DROP PARTITION p4;
SHOW CREATE TABLE tbl_list_col;
Table,Create Table
tbl_list_col,CREATE TABLE `tbl_list_col` (
	`a` int(11) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES IN ((10,11),(12,13)) ENGINE = InnoDB,
 PARTITION p3 VALUES IN ((100,1321),(200,201)) ENGINE = InnoDB)
SHOW CREATE TABLE tbl_list_col1;
Table,Create Table
tbl_list_col1,CREATE TABLE `tbl_list_col1` (
	`a` int(11) NOT NULL,
	`b` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES IN ((10,11),(12,13)) ENGINE = InnoDB,
 PARTITION p3 VALUES IN ((100,1321),(200,201)) ENGINE = InnoDB)