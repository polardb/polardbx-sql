DROP TABLE IF EXISTS rng_cols;
CREATE TABLE `rng_cols` (
	`a` bigint(20) NOT NULL,
	`b` bigint(20) NOT NULL,
	`c` bigint(20) NOT NULL
) ENGINE = InnoDB AUTO_INCREMENT = 400002 DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS (a, b, c) (
	PARTITION p0 VALUES LESS THAN (100, 1000, 10000)
		STORAGE ENGINE InnoDB,
	PARTITION p1 VALUES LESS THAN (100, 2000, 10000)
		STORAGE ENGINE InnoDB,
	PARTITION p2 VALUES LESS THAN (100, 2000, 30000)
		STORAGE ENGINE InnoDB,
	PARTITION p3 VALUES LESS THAN (200, 1000, 10000)
		STORAGE ENGINE InnoDB,
	PARTITION p4 VALUES LESS THAN (200, 1000, 20000)
		STORAGE ENGINE InnoDB,
	PARTITION p5 VALUES LESS THAN (200, 2000, 10000)
		STORAGE ENGINE InnoDB,
	PARTITION p6 VALUES LESS THAN (300, 2000, 10000)
		STORAGE ENGINE InnoDB
);
SHOW CREATE TABLE rng_cols;
Table,Create Table
rng_cols,CREATE TABLE `rng_cols` (
	`a` bigint(20) NOT NULL,
	`b` bigint(20) NOT NULL,
	`c` bigint(20) NOT NULL,
	KEY `auto_shard_key_a_b_c` USING BTREE (`a`, `b`, `c`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE COLUMNS(`a`,`b`,`c`)
(PARTITION p0 VALUES LESS THAN (100,1000,10000) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (100,2000,10000) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (100,2000,30000) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (200,1000,10000) ENGINE = InnoDB,
 PARTITION p4 VALUES LESS THAN (200,1000,20000) ENGINE = InnoDB,
 PARTITION p5 VALUES LESS THAN (200,2000,10000) ENGINE = InnoDB,
 PARTITION p6 VALUES LESS THAN (300,2000,10000) ENGINE = InnoDB)
EXPLAIN SELECT *
FROM rng_cols
WHERE (a = 200
		OR a >= 299)
	AND (b <= 900
		OR b >= 1000)
	AND c IN (9999);
Logical ExecutionPlan
Gather(concurrent=true)
  LogicalView(tables="rng_cols[p3,p5,p6]", shardCount=3, sql="SELECT `a`, `b`, `c` FROM `rng_cols` AS `rng_cols` WHERE ((`c` IN(?)) AND ((`a` = ?) OR (`a` >= ?)) AND ((`b` <= ?) OR (`b` >= ?)))", isDynamicParam="true")
