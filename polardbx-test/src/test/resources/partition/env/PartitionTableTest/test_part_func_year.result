DROP TABLE IF EXISTS tbl;
CREATE TABLE `tbl` (
	`a` datetime NOT NULL
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE (year(a)) (
	PARTITION p0 VALUES LESS THAN (1990)
		STORAGE ENGINE InnoDB,
	PARTITION p1 VALUES LESS THAN (2000)
		STORAGE ENGINE InnoDB,
	PARTITION p2 VALUES LESS THAN (2010)
		STORAGE ENGINE InnoDB,
	PARTITION p3 VALUES LESS THAN (2020)
		STORAGE ENGINE InnoDB
);
SHOW CREATE TABLE tbl;
Table,Create Table
tbl,CREATE TABLE `tbl` (
	`a` datetime NOT NULL,
	KEY `auto_shard_key_a` USING BTREE (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(YEAR(`a`))
(PARTITION p0 VALUES LESS THAN (1990) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (2000) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (2010) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (2020) ENGINE = InnoDB)
INSERT INTO tbl
VALUES ('1989-01-01');
INSERT INTO tbl
VALUES ('1990-01-01'),
	('1991-01-01'),
	('2019-01-01');
SELECT *
FROM tbl
WHERE a = '1989-01-01'
ORDER BY a;
a
1989-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '1990-01-01'
ORDER BY a;
a
1990-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '1991-01-01'
ORDER BY a;
a
1991-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '2019-01-01'
ORDER BY a;
a
2019-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE (a < '2019-01-02'
		AND a >= '2009-12-31')
	OR a BETWEEN '1989-01-01' AND '1989-11-01'
ORDER BY a;
a
1989-01-01 00:00:00.0
2019-01-01 00:00:00.0
EXPLAIN SELECT *
FROM tbl
WHERE a = '1989-01-01'
ORDER BY a;
Logical ExecutionPlan
LogicalView(tables="tbl[p0]", sql="SELECT `a` FROM `tbl` AS `tbl` WHERE (`a` = ?) ORDER BY `a`")
EXPLAIN SELECT *
FROM tbl
WHERE (a < '2019-01-02'
		AND a >= '2009-12-31')
	OR a BETWEEN '1989-01-01' AND '1989-11-01'
ORDER BY a;
Logical ExecutionPlan
MergeSort(sort="a ASC")
  LogicalView(tables="tbl[p0,p2,p3]", shardCount=3, sql="SELECT `a` FROM `tbl` AS `tbl` WHERE (((`a` < ?) AND (`a` >= ?)) OR (`a` BETWEEN ? AND ?)) ORDER BY `a`")