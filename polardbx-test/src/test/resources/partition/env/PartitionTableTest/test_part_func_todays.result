DROP TABLE IF EXISTS tbl;
CREATE TABLE `tbl` (
	`a` datetime NOT NULL
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE (to_days(a)) (
	PARTITION p0 VALUES LESS THAN (to_days('1990-01-01'))
		STORAGE ENGINE InnoDB,
	PARTITION p1 VALUES LESS THAN (to_days('2000-01-01'))
		STORAGE ENGINE InnoDB,
	PARTITION p2 VALUES LESS THAN (to_days('2010-01-01'))
		STORAGE ENGINE InnoDB,
	PARTITION p3 VALUES LESS THAN (to_days('2020-01-01'))
		STORAGE ENGINE InnoDB
);
SHOW CREATE TABLE tbl;
Table,Create Table
tbl,CREATE TABLE `tbl` (
	`a` datetime NOT NULL,
	KEY `auto_shard_key_a` USING BTREE (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4  
PARTITION BY RANGE(TO_DAYS(`a`))
(PARTITION p0 VALUES LESS THAN (726833) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (730485) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (734138) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (737790) ENGINE = InnoDB)
INSERT INTO tbl
VALUES ('1989-01-01');
INSERT INTO tbl
VALUES ('1990-01-01'),
	('1991-01-01'),
	('2019-01-01');
SELECT *
FROM tbl
WHERE a = '1989-01-01'
ORDER BY a;
a
1989-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '1990-01-01'
ORDER BY a;
a
1990-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '1991-01-01'
ORDER BY a;
a
1991-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '2019-01-01'
ORDER BY a;
a
2019-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE (a < '2019-01-02'
		AND a >= '2009-12-31')
	OR a BETWEEN '1989-01-01' AND '1989-11-01'
ORDER BY a;
a
1989-01-01 00:00:00.0
2019-01-01 00:00:00.0
EXPLAIN SELECT *
FROM tbl
WHERE a = '1989-01-01'
ORDER BY a;
Logical ExecutionPlan
LogicalView(tables="tbl[p0]", sql="SELECT `a` FROM `tbl` AS `tbl` WHERE (`a` = ?) ORDER BY `a`")
EXPLAIN SELECT *
FROM tbl
WHERE (a < '2019-01-02'
		AND a >= '2009-12-31')
	OR a BETWEEN '1989-01-01' AND '1989-11-01'
ORDER BY a;
Logical ExecutionPlan
MergeSort(sort="a ASC")
  LogicalView(tables="tbl[p0,p2,p3]", shardCount=3, sql="SELECT `a` FROM `tbl` AS `tbl` WHERE (((`a` < ?) AND (`a` >= ?)) OR (`a` BETWEEN ? AND ?)) ORDER BY `a`")


