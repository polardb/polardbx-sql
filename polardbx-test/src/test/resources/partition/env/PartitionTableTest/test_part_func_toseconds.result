DROP TABLE IF EXISTS tbl;
CREATE TABLE `tbl` (
	`a` datetime NOT NULL
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE (to_seconds(a)) (
	PARTITION p0 VALUES LESS THAN (to_seconds('1990-01-01 00:00:00'))
		STORAGE ENGINE InnoDB,
	PARTITION p1 VALUES LESS THAN (to_seconds('2000-01-01 00:00:01'))
		STORAGE ENGINE InnoDB,
	PARTITION p2 VALUES LESS THAN (to_seconds('2010-01-01 00:00:02'))
		STORAGE ENGINE InnoDB,
	PARTITION p3 VALUES LESS THAN (to_seconds('2020-01-01 00:00:03'))
		STORAGE ENGINE InnoDB
);
SHOW CREATE TABLE tbl;
Table,Create Table
tbl,CREATE TABLE `tbl` (
	`a` datetime NOT NULL,
	KEY `auto_shard_key_a` USING BTREE (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(TO_SECONDS(`a`))
(PARTITION p0 VALUES LESS THAN (62798371200) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN (63113904001) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN (63429523202) ENGINE = InnoDB,
 PARTITION p3 VALUES LESS THAN (63745056003) ENGINE = InnoDB)
INSERT INTO tbl
VALUES ('1989-01-01 00:00:00');
INSERT INTO tbl
VALUES ('1990-01-01 00:00:01'),
	('1991-01-01 00:00:02'),
	('2019-01-01 00:00:03');
SELECT *
FROM tbl
WHERE a = '1989-01-01 00:00:00'
ORDER BY a;
a
1989-01-01 00:00:00.0
SELECT *
FROM tbl
WHERE a = '1990-01-01 00:00:01'
ORDER BY a;
a
1990-01-01 00:00:01.0
SELECT *
FROM tbl
WHERE a = '1991-01-01 00:00:02'
ORDER BY a;
a
1991-01-01 00:00:02.0
SELECT *
FROM tbl
WHERE a = '2019-01-01 00:00:03'
ORDER BY a;
a
2019-01-01 00:00:03.0
SELECT *
FROM tbl
WHERE (a < '2019-01-02 00:00:00'
		AND a >= '2009-12-31 00:00:00')
	OR a BETWEEN '1989-01-01 00:00:00' AND '1989-11-01 00:00:00'
ORDER BY a;
a
1989-01-01 00:00:00.0
2019-01-01 00:00:03.0
EXPLAIN SELECT *
FROM tbl
WHERE a = '2000-01-01 00:00:00'
ORDER BY a;
Logical ExecutionPlan
PhyTableOperation(tables="tbl[p1]", sql="SELECT `tbl`.`a` FROM ? AS `tbl` WHERE (`tbl`.`a` = ?) ORDER BY `a`", params="2000-01-01 00:00:00")
EXPLAIN SELECT *
FROM tbl
WHERE (a < '2019-01-02 00:00:00'
		AND a >= '2009-12-31 23:59:59')
	OR a BETWEEN '1989-01-01 00:00:00' AND '1989-12-31 23:59:59'
ORDER BY a;
Logical ExecutionPlan
MergeSort(sort="a ASC")
  LogicalView(tables="tbl[p0,p2,p3]", shardCount=3, sql="SELECT `a` FROM `tbl` AS `tbl` WHERE (((`a` < ?) AND (`a` >= ?)) OR (`a` BETWEEN ? AND ?)) ORDER BY `a`")